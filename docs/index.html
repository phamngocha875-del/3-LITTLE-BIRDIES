<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L'Écrin - Luxury Fragrance Experience</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts Fallback -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <style>
        /* Custom Font Declaration */
        @font-face {
            font-family: 'Maglite';
            src: local('Maglite'), local('Playfair Display'), local('Didot');
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #f5f5f5;
            -webkit-tap-highlight-color: transparent;
        }

        .font-maglite {
            font-family: 'Maglite', 'Playfair Display', serif;
        }

        /* Animations */
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); }
            70% { box-shadow: 0 0 0 30px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        @keyframes dust-rise {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100px) scale(0); opacity: 0; }
        }
        @keyframes smoke-expand {
            0% { transform: scale(0.8); opacity: 0.8; filter: blur(10px); }
            100% { transform: scale(2.5); opacity: 0; filter: blur(20px); }
        }
        @keyframes orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes counter-orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(-360deg); }
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nfc-ring { animation: pulse-gold 2s infinite; }
        .bg-parallax { background-attachment: fixed; background-position: center; background-size: cover; }
        .animate-in { animation: fade-in 0.7s ease-out forwards; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="selection:bg-[#D4AF37] flex justify-center h-screen overflow-hidden">

    <!-- Mobile Container -->
    <div class="relative w-full h-full max-w-md bg-neutral-950 overflow-hidden shadow-2xl flex flex-col">
        
        <!-- ========================================== -->
        <!-- SCREEN 1: THE AWAKENING                    -->
        <!-- ========================================== -->
        <div id="screen-awakening" class="absolute inset-0 flex flex-col items-center justify-center bg-black z-50 transition-opacity duration-1000">
            <div class="text-center z-10 space-y-16">
                <h1 class="font-maglite text-3xl font-light tracking-widest text-[#D4AF37]/90 uppercase">L'Écrin</h1>
                
                <div class="relative flex justify-center items-center h-48" id="nfc-area">
                    <!-- Default NFC Button -->
                    <button id="nfc-btn" class="nfc-ring w-24 h-24 rounded-full border border-[#D4AF37]/50 flex items-center justify-center bg-[#D4AF37]/10 backdrop-blur-md transition-all hover:bg-[#D4AF37]/20 cursor-pointer">
                        <i data-lucide="sparkles" class="w-8 h-8 text-[#D4AF37]"></i>
                    </button>
                    
                    <!-- Awaking Animation Container (Hidden initially) -->
                    <div id="awaking-animation" class="hidden relative">
                        <div class="w-32 h-32 rounded-full bg-[#D4AF37] opacity-20 animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite]"></div>
                        <!-- Dust particles generated by JS -->
                        <div id="dust-particles"></div>
                    </div>
                </div>

                <p id="awaking-text" class="text-sm font-light text-neutral-400 tracking-wide px-8 leading-relaxed max-w-xs mx-auto transition-opacity duration-500">
                    Tap your "L'Écrin" on the back of your phone to awaken the senses.
                </p>
            </div>
            <!-- Ambient background gradient -->
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#D4AF37]/10 via-black to-black opacity-60"></div>
        </div>

        <!-- ========================================== -->
        <!-- MAIN APP WRAPPER                           -->
        <!-- ========================================== -->
        <div id="app-wrapper" class="flex-1 flex flex-col h-full opacity-0 transition-opacity duration-1000">
            
            <!-- App Header -->
            <header class="pt-12 pb-4 px-6 flex justify-between items-center bg-gradient-to-b from-black to-transparent z-10 shrink-0">
                <h2 id="header-title" class="font-maglite text-xl text-[#D4AF37] tracking-widest uppercase">L'Écrin</h2>
                <button class="p-2 text-neutral-400 hover:text-[#D4AF37] transition-colors">
                    <i data-lucide="settings" class="w-5 h-5"></i>
                </button>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto pb-24 scrollbar-hide relative">
                
                <!-- SCREEN 2: THE DASHBOARD -->
                <div id="view-dashboard" class="hidden flex-col items-center justify-center h-full animate-in">
                    
                    <!-- 3D Charm Display & Cores -->
                    <div class="relative w-72 h-72 flex items-center justify-center mt-4">
                        <!-- Background Glow based on active scent -->
                        <div id="dashboard-glow" class="absolute inset-0 rounded-full blur-3xl opacity-20 transition-colors duration-1000"></div>

                        <!-- The Bag Charm -->
                        <div class="z-10 w-40 h-48 rounded-3xl bg-gradient-to-br from-red-900 via-rose-950 to-black border border-red-900/50 shadow-2xl flex items-center justify-center relative overflow-hidden group cursor-pointer">
                            <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/leather.png')]"></div>
                            <div class="w-16 h-16 rounded-full border-2 border-[#D4AF37]/50 flex items-center justify-center bg-black/40 backdrop-blur-sm">
                                <span class="font-maglite text-[#D4AF37] text-2xl font-light">L</span>
                            </div>
                            <div class="absolute top-2 w-8 h-2 border border-[#D4AF37]/50 rounded-full bg-[#D4AF37]/10"></div>
                        </div>

                        <!-- Cores injected via JS - Using inset-0 and pointer-events-none for perfect absolute centering -->
                        <div id="dashboard-cores-container" class="absolute inset-0 pointer-events-none"></div>
                    </div>

                    <!-- Status & Details -->
                    <div class="mt-6 text-center w-full pb-6">
                        <p class="text-[10px] tracking-widest text-neutral-500 uppercase mb-2">Currently Diffusing</p>
                        <h3 id="dashboard-frag-name" class="font-maglite text-2xl text-[#D4AF37] font-light px-4 transition-all duration-500 mb-2"></h3>
                        <p id="dashboard-frag-desc" class="text-sm font-light text-neutral-400 px-8 leading-relaxed line-clamp-2 min-h-[40px]"></p>
                        
                        <!-- Contextual Intelligence Grid (Biometrics & Environment) -->
                        <div class="grid grid-cols-2 gap-3 w-full max-w-[320px] mx-auto mt-6 text-left px-4">
                            <!-- Heart Rate -->
                            <div class="flex items-center gap-3 p-3 rounded-2xl border border-white/5 bg-gradient-to-br from-white/[0.05] to-transparent backdrop-blur-md">
                                <div class="p-2 rounded-full bg-[#D4AF37]/10">
                                    <i data-lucide="heart-pulse" class="w-4 h-4 text-[#D4AF37]"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-[9px] text-neutral-500 uppercase tracking-widest">Heart Rate</span>
                                    <span class="text-xs text-neutral-200 font-medium">72 bpm</span>
                                </div>
                            </div>
                            <!-- Body Temp -->
                            <div class="flex items-center gap-3 p-3 rounded-2xl border border-white/5 bg-gradient-to-br from-white/[0.05] to-transparent backdrop-blur-md">
                                <div class="p-2 rounded-full bg-[#D4AF37]/10">
                                    <i data-lucide="thermometer" class="w-4 h-4 text-[#D4AF37]"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-[9px] text-neutral-500 uppercase tracking-widest">Body Temp</span>
                                    <span class="text-xs text-neutral-200 font-medium">36.5°C</span>
                                </div>
                            </div>
                            <!-- Environment -->
                            <div class="flex items-center gap-3 p-3 rounded-2xl border border-white/5 bg-gradient-to-br from-white/[0.05] to-transparent backdrop-blur-md">
                                <div class="p-2 rounded-full bg-[#D4AF37]/10">
                                    <i data-lucide="cloud-sun" class="w-4 h-4 text-[#D4AF37]"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-[9px] text-neutral-500 uppercase tracking-widest">Weather</span>
                                    <span class="text-xs text-neutral-200 font-medium">24°C, Clear</span>
                                </div>
                            </div>
                            <!-- Spotify -->
                            <div class="flex items-center gap-3 p-3 rounded-2xl border border-white/5 bg-gradient-to-br from-white/[0.05] to-transparent backdrop-blur-md">
                                <div class="p-2 rounded-full bg-[#1DB954]/10">
                                    <i data-lucide="music" class="w-4 h-4 text-[#1DB954]"></i>
                                </div>
                                <div class="flex flex-col overflow-hidden w-full">
                                    <span class="text-[9px] text-neutral-500 uppercase tracking-widest">Spotify</span>
                                    <span class="text-xs text-neutral-200 font-medium truncate">Clair de Lune</span>
                                </div>
                            </div>
                        </div>

                        <!-- Swipe Indicator -->
                        <div id="dashboard-indicators" class="flex justify-center gap-2 mt-6"></div>
                    </div>
                </div>

                <!-- SCREEN 3: THE ATELIER -->
                <div id="view-atelier" class="hidden flex-col items-center h-full px-6 pt-4 animate-in">
                    <p class="text-sm font-light text-neutral-400 tracking-wide text-center mb-10">
                        Master your senses. Blend cores to create your bespoke signature.
                    </p>

                    <!-- Planetary Orbit Concept -->
                    <div class="relative w-80 h-80 flex items-center justify-center group mt-4 mb-4">
                        
                        <!-- Orbit Rings (Aesthetic) -->
                        <div class="absolute inset-0 rounded-full border border-neutral-800/30 m-4 pointer-events-none"></div>
                        <div class="absolute inset-0 rounded-full border border-neutral-800/10 m-10 pointer-events-none"></div>

                        <!-- Rotating Orbit Container injected via JS -->
                        <div id="atelier-orbit-container" class="absolute inset-0 animate-[orbit_40s_linear_infinite] group-hover:[animation-play-state:paused] z-10">
                        </div>

                        <!-- Central Activate Button -->
                        <button id="activate-btn" class="z-20 w-32 h-32 rounded-full bg-gradient-to-br from-[#D4AF37] to-[#8C6D23] border-4 border-black shadow-[0_0_30px_rgba(212,175,55,0.2)] flex flex-col items-center justify-center active:scale-95 transition-all overflow-hidden relative hover:shadow-[0_0_40px_rgba(212,175,55,0.4)] cursor-pointer">
                            <i data-lucide="wind" class="w-8 h-8 text-[#FFF8E7] mb-1 transition-transform"></i>
                            <span class="font-maglite text-sm tracking-widest text-white font-medium">ACTIVATE</span>
                        </button>
                    </div>

                    <div class="mt-8 text-center w-full">
                        <h3 id="atelier-frag-name" class="font-maglite text-xl text-[#D4AF37] mb-1"></h3>
                        <p id="atelier-frag-type" class="text-xs text-neutral-500 uppercase tracking-widest"></p>
                    </div>

                    <!-- Modes -->
                    <div class="mt-12 w-full max-w-sm bg-neutral-900/50 p-1 rounded-2xl flex justify-between border border-neutral-800/50 z-20">
                        <button class="flex-1 py-3 px-2 rounded-xl bg-neutral-800 text-[#D4AF37] text-xs tracking-wider flex items-center justify-center gap-2 shadow-inner border border-neutral-700/50">
                            <i data-lucide="droplet" class="w-4 h-4"></i> Single
                        </button>
                        <button class="flex-1 py-3 px-2 rounded-xl text-neutral-400 hover:text-white text-xs tracking-wider flex items-center justify-center gap-2 transition-colors">
                            <i data-lucide="sliders-horizontal" class="w-4 h-4"></i> Blend
                        </button>
                        <button class="flex-1 py-3 px-2 rounded-xl text-neutral-400 hover:text-white text-xs tracking-wider flex items-center justify-center gap-2 transition-colors">
                            <i data-lucide="clock" class="w-4 h-4"></i> Schedule
                        </button>
                    </div>
                </div>

                <!-- SCREEN 4: THE BOUTIQUE -->
                <div id="view-boutique" class="hidden flex-col h-full animate-in">
                    <!-- Populated via JS -->
                </div>
            </main>

            <!-- App Bottom Navigation Bar -->
            <nav class="fixed bottom-0 left-0 right-0 mx-auto w-full max-w-md bg-black/90 backdrop-blur-md border-t border-neutral-900 pb-safe z-50">
                <div class="flex justify-around items-center h-20 px-6">
                    <button onclick="changeScreen('dashboard')" id="nav-dashboard" class="flex flex-col items-center gap-1.5 transition-colors text-[#D4AF37]">
                        <div id="nav-icon-dashboard" class="p-2 rounded-xl transition-all bg-[#D4AF37]/20">
                            <i data-lucide="check-circle-2" class="w-6 h-6"></i>
                        </div>
                        <span class="text-[10px] tracking-widest uppercase font-medium">Status</span>
                    </button>

                    <button onclick="changeScreen('atelier')" id="nav-atelier" class="flex flex-col items-center gap-1.5 transition-colors text-neutral-600 hover:text-neutral-400">
                        <div id="nav-icon-atelier" class="p-2 rounded-xl transition-all">
                            <i data-lucide="settings" class="w-6 h-6"></i>
                        </div>
                        <span class="text-[10px] tracking-widest uppercase font-medium">The Atelier</span>
                    </button>

                    <button onclick="changeScreen('boutique')" id="nav-boutique" class="flex flex-col items-center gap-1.5 transition-colors text-neutral-600 hover:text-neutral-400">
                        <div id="nav-icon-boutique" class="p-2 rounded-xl transition-all">
                            <i data-lucide="shopping-bag" class="w-6 h-6"></i>
                        </div>
                        <span class="text-[10px] tracking-widest uppercase font-medium">Boutique</span>
                    </button>
                </div>
            </nav>
        </div>
    </div>

    <!-- Application Logic -->
    <script>
        // --- DATA MOCKUP ---
        const fragrances = [
            { id: 1, name: 'No.1 - Rose de Mai', type: 'Floral', color: '#FFB6C1', level: 85, description: 'The radiant blooming of freshly handpicked early morning roses in Grasse.', notes: { top: 'Bergamot, Pink Pepper', heart: 'Rose de Mai, Peony', base: 'White Musk, Cedarwood' }, image: 'https://images.unsplash.com/photo-1559564484-e48b3e040ff4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80' },
            { id: 2, name: 'No.2 - Santal Nuit', type: 'Woody', color: '#8B4513', level: 40, description: 'A warm and deep sandalwood fragrance, carrying the breath of a mystical night.', notes: { top: 'Cardamom, Cypress', heart: 'Sandalwood, Frankincense', base: 'Vetiver, Leather' }, image: 'https://images.unsplash.com/photo-1611078813455-cb091461bce9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80' },
            { id: 3, name: 'No.3 - Midnight Jasmine', type: 'Floral Oriental', color: '#4B0082', level: 60, description: 'An intoxicating symphony of jasmine blooming under the moonlight.', notes: { top: 'Orange Blossom, Almond', heart: 'Sambac Jasmine, Tuberose', base: 'Vanilla, Amber' }, image: 'https://images.unsplash.com/photo-1548263594-a71ea65a8598?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80' },
            { id: 4, name: 'No.4 - Aqua Flora', type: 'Fresh', color: '#5F9EA0', level: 95, description: 'A cool sea breeze intertwined with pure water lily.', notes: { top: 'Marine Notes, Lemon', heart: 'Water Lily, Lily of the Valley', base: 'Oakmoss, Musk' }, image: 'https://images.unsplash.com/photo-1505235687559-28b5f54645b7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80' },
            { id: 5, name: 'No.5 - Oud Majesté', type: 'Oriental', color: '#B8860B', level: 15, description: 'The majestic presence of rare oud, powerful and captivating.', notes: { top: 'Saffron, Raspberry', heart: 'Rose, Oud', base: 'Patchouli, Myrrh' }, image: 'https://images.unsplash.com/photo-1605648833076-0bf170889c25?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80' }
        ];

        // --- STATE ---
        let currentScreen = 'awakening';
        let activeFragrance = fragrances[2]; // Default No.3

        // --- INITIALIZE ---
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            renderDashboard();
            renderAtelier();
            renderBoutique();
            updateUI();
        });

        // --- FUNCTIONS ---
        
        // 1. NFC Tap Simulation
        document.getElementById('nfc-btn').addEventListener('click', () => {
            if (navigator.vibrate) navigator.vibrate(50);
            
            document.getElementById('nfc-btn').classList.add('hidden');
            document.getElementById('awaking-animation').classList.remove('hidden');
            document.getElementById('awaking-text').style.opacity = '0';

            // Generate particles
            const particleContainer = document.getElementById('dust-particles');
            particleContainer.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const el = document.createElement('div');
                el.className = 'absolute w-1.5 h-1.5 bg-[#D4AF37] rounded-full';
                const animDuration = 1 + Math.random();
                el.style.top = '50%';
                el.style.left = '50%';
                el.style.animation = `dust-rise ${animDuration}s ease-out forwards`;
                el.style.transform = `rotate(${i * 30}deg) translateY(-20px)`;
                particleContainer.appendChild(el);
            }

            setTimeout(() => {
                currentScreen = 'dashboard';
                updateScreenVisibility();
            }, 2500);
        });

        // 2. Change Nav Screen
        window.changeScreen = (screenName) => {
            currentScreen = screenName;
            updateScreenVisibility();
        };

        // 3. Select Fragrance
        window.selectFragrance = (id) => {
            if (navigator.vibrate) navigator.vibrate(10);
            activeFragrance = fragrances.find(f => f.id === id);
            updateUI();
        };

        // 4. Activate Fragrance Smoke Effect
        document.getElementById('activate-btn').addEventListener('click', function(e) {
            if (navigator.vibrate) navigator.vibrate([20, 50, 20]);
            const smoke = document.createElement('div');
            smoke.className = 'absolute inset-0 rounded-full pointer-events-none';
            smoke.style.backgroundColor = activeFragrance.color;
            smoke.style.animation = 'smoke-expand 1.5s ease-out forwards';
            this.appendChild(smoke);
            setTimeout(() => smoke.remove(), 1500);
        });

        // --- RENDERING & UI UPDATES ---

        function updateScreenVisibility() {
            // Handle Awakening overlay
            const awakeningOverlay = document.getElementById('screen-awakening');
            const appWrapper = document.getElementById('app-wrapper');
            
            if (currentScreen === 'awakening') {
                awakeningOverlay.style.opacity = '1';
                awakeningOverlay.style.pointerEvents = 'auto';
                appWrapper.style.opacity = '0';
                return;
            } else {
                awakeningOverlay.style.opacity = '0';
                awakeningOverlay.style.pointerEvents = 'none';
                appWrapper.style.opacity = '1';
            }

            // Views
            ['dashboard', 'atelier', 'boutique'].forEach(view => {
                const el = document.getElementById(`view-${view}`);
                if (view === currentScreen) {
                    el.classList.remove('hidden');
                    el.classList.add('flex');
                } else {
                    el.classList.add('hidden');
                    el.classList.remove('flex');
                }
            });

            // Header
            const headerTitle = document.getElementById('header-title');
            if(currentScreen === 'dashboard') headerTitle.innerText = "L'Écrin";
            else if(currentScreen === 'atelier') headerTitle.innerText = "The Atelier";
            else if(currentScreen === 'boutique') headerTitle.innerText = "The Boutique";

            // Nav Tabs
            ['dashboard', 'atelier', 'boutique'].forEach(nav => {
                const btn = document.getElementById(`nav-${nav}`);
                const iconBox = document.getElementById(`nav-icon-${nav}`);
                
                if (nav === currentScreen) {
                    btn.className = "flex flex-col items-center gap-1.5 transition-colors text-[#D4AF37]";
                    iconBox.className = "p-2 rounded-xl transition-all bg-[#D4AF37]/20";
                } else {
                    btn.className = "flex flex-col items-center gap-1.5 transition-colors text-neutral-600 hover:text-neutral-400";
                    iconBox.className = "p-2 rounded-xl transition-all";
                }
            });
        }

        function updateUI() {
            // Update Dashboard Cores
            renderDashboard();
            
            // Update Dashboard Text
            document.getElementById('dashboard-glow').style.backgroundColor = activeFragrance.color;
            document.getElementById('dashboard-frag-name').innerText = activeFragrance.name;
            document.getElementById('dashboard-frag-desc').innerText = activeFragrance.description;
            
            // Update Swipe Indicators
            const indicators = document.getElementById('dashboard-indicators');
            indicators.innerHTML = '';
            fragrances.forEach((f, idx) => {
                const div = document.createElement('div');
                div.className = `h-1 rounded-full transition-all duration-300 ${activeFragrance.id === (idx + 1) ? 'w-6 bg-[#D4AF37]' : 'w-2 bg-neutral-800'}`;
                indicators.appendChild(div);
            });

            // Update Atelier Text
            document.getElementById('atelier-frag-name').innerText = activeFragrance.name;
            document.getElementById('atelier-frag-type').innerText = activeFragrance.type;

            // Re-render Atelier Cores to update Active state
            renderAtelier();
        }

        function renderDashboard() {
            const container = document.getElementById('dashboard-cores-container');
            container.innerHTML = '';
            
            fragrances.forEach((frag, index) => {
                const angle = (index * (360 / 5) - 90) * (Math.PI / 180);
                const radius = 130;
                const x = Math.cos(angle) * radius;
                const y = Math.sin(angle) * radius;
                const isActive = activeFragrance.id === frag.id;

                const bgDisplay = isActive ? 'rgba(0,0,0,0.8)' : frag.color;
                const levelColor = frag.level > 20 ? '#D4AF37' : '#ef4444';
                
                // Note: top 50%, left 50% and translate perfectly centers them relative to the main container
                const html = `
                    <div class="absolute flex flex-col items-center justify-center transition-all duration-500 cursor-pointer hover:scale-110 pointer-events-auto"
                         style="top: 50%; left: 50%; transform: translate(calc(-50% + ${x}px), calc(-50% + ${y}px)); z-index: 20;"
                         onclick="selectFragrance(${frag.id})">
                        <div class="w-10 h-10 rounded-full border-2 transition-all duration-300 flex items-center justify-center ${isActive ? 'border-[#D4AF37] scale-110 shadow-[0_0_15px_rgba(212,175,55,0.4)]' : 'border-neutral-700/50'}"
                             style="background-color: ${bgDisplay}">
                            ${isActive ? '<i data-lucide="droplet" class="w-4 h-4 text-[#D4AF37]"></i>' : ''}
                        </div>
                        <div class="w-8 h-1 bg-neutral-800 rounded-full mt-2 overflow-hidden">
                            <div class="h-full rounded-full transition-all duration-1000"
                                 style="width: ${frag.level}%; background-color: ${levelColor}"></div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
            lucide.createIcons();
        }

        function renderAtelier() {
            const container = document.getElementById('atelier-orbit-container');
            container.innerHTML = '';

            fragrances.forEach((frag, index) => {
                const angle = index * (360 / 5);
                const isSelected = activeFragrance.id === frag.id;
                
                const activeClasses = isSelected 
                    ? 'border-[#D4AF37] shadow-[0_0_20px_rgba(212,175,55,0.4)] scale-110' 
                    : 'border-neutral-800 opacity-60 hover:opacity-100 hover:border-neutral-500';

                const html = `
                    <div class="absolute inset-0" style="transform: rotate(${angle}deg)">
                        <div class="absolute top-2 left-1/2 -ml-8 w-16 h-16 cursor-pointer" onclick="selectFragrance(${frag.id})">
                            <div class="w-full h-full animate-[counter-orbit_40s_linear_infinite] group-hover:[animation-play-state:paused]">
                                <div class="w-full h-full rounded-full border-2 flex items-center justify-center transition-all duration-300 ${activeClasses}"
                                     style="background-color: ${frag.color}; transform: rotate(-${angle}deg)">
                                    <span class="text-xs font-bold text-white/90 drop-shadow-md">${frag.id}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
        }

        function renderBoutique() {
            const container = document.getElementById('view-boutique');
            container.innerHTML = '';

            fragrances.forEach(frag => {
                const splitName = frag.name.split(' - ');
                const displayTitle = splitName.length > 1 ? splitName[1] : frag.name;

                const html = `
                    <div class="relative w-full min-h-[80vh] flex flex-col justify-end border-b border-neutral-900">
                        <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-40 bg-parallax"
                             style="background-image: url('${frag.image}')"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div>
                        
                        <div class="relative z-10 px-8 pb-16 space-y-6">
                            <div class="space-y-2">
                                <span class="text-xs font-bold tracking-[0.3em] uppercase" style="color: ${frag.color}">
                                    ${frag.type} Collection
                                </span>
                                <h3 class="font-maglite text-4xl text-white font-light leading-tight">
                                    ${displayTitle}
                                </h3>
                            </div>

                            <p class="text-sm font-light text-neutral-300 leading-relaxed max-w-xs">
                                ${frag.description}
                            </p>

                            <div class="grid grid-cols-3 gap-4 border-y border-neutral-800 py-4 my-6">
                                <div class="space-y-1">
                                    <p class="text-[10px] text-neutral-500 uppercase tracking-widest">Top</p>
                                    <p class="text-xs text-neutral-300">${frag.notes.top}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-[10px] text-neutral-500 uppercase tracking-widest">Heart</p>
                                    <p class="text-xs text-neutral-300">${frag.notes.heart}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-[10px] text-neutral-500 uppercase tracking-widest">Base</p>
                                    <p class="text-xs text-neutral-300">${frag.notes.base}</p>
                                </div>
                            </div>

                            <button class="w-full py-4 px-6 border border-[#D4AF37]/50 text-[#D4AF37] uppercase tracking-widest text-xs font-semibold hover:bg-[#D4AF37] hover:text-black transition-colors duration-300 flex items-center justify-center gap-2">
                                <i data-lucide="shopping-bag" class="w-4 h-4"></i> Add Core to Cart
                            </button>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
            lucide.createIcons();
        }
    </script>
</body>
</html>
